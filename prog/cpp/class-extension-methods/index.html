<!DOCTYPE html>
<!--[if IE 7]><html class="ie ie7" lang="ja"><![endif]-->
<!--[if IE 8]><html class="ie ie8" lang="ja"><![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!--><html lang="ja"><!--<![endif]-->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>【C++】既存のクラスを拡張する方法【拡張メソッド／カテゴリ】 | MaryCore</title>
<meta property="og:type" content="article"><meta property="og:site_name" content="MaryCore 言語知能総合研究所"><meta property="og:url" content="http://marycore.jp/prog/cpp/class-extension-methods/"><meta property="og:title" content="【C++】既存のクラスを拡張する方法【拡張メソッド／カテゴリ】"><meta property="og:description" content="C#の拡張メソッドやRubyのオープンクラス、Swiftのextension、Objective-Cのカテゴリーの活用例に近い感・・・"><!--[if lt IE 9]><script src="http://marycore.jp/wp/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script><![endif]-->
<link rel='stylesheet' id='twentytwelve-style-css'  href='http://marycore.jp/wp/wp-content/themes/marycore/style.css?ver=4.9.9' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://marycore.jp/wp/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<link rel="canonical" href="http://marycore.jp/prog/cpp/class-extension-methods/" />
</head>
<body class="post-template-default single single-post postid-1674 single-format-standard"><div id="page" class="hfeed site"><header id="masthead" class="site-header" role="banner"><hgroup><h1 class="site-title"><a href="http://marycore.jp/" title="ヽ( ・ω・)ノ Don&#039;t feel. THINK! ~ Presented by MaryCore ~" rel="home">MaryCore</a></h1></hgroup><nav id="site-navigation" class="main-navigation" role="navigation"><button class="menu-toggle">メニュー</button><a class="assistive-text" href="#content" title="コンテンツへ移動">コンテンツへ移動</a><div class="menu-%e3%83%a1%e3%83%8b%e3%83%a5%e3%83%bc-1-container"><ul id="menu-%e3%83%a1%e3%83%8b%e3%83%a5%e3%83%bc-1" class="nav-menu"><li id="menu-item-2763" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2763"><a title="McTap／キーボード拡張アプリ" href="http://marycore.jp/mctap/">新作ソフトウェア<sup class="badge-info-invert">New!</sup></a></li>
<li id="menu-item-515" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-515"><a title="制作したアプリ／Our Applications" href="http://marycore.jp/apps/">アプリ</a></li>
<li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-86"><a title="サイトについて／About this site" href="http://marycore.jp/about/">サイトについて</a></li>
<li id="menu-item-87" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-87"><a title="Contact／お問い合わせ" href="http://marycore.jp/contact/">お問い合わせ</a></li>
<li id="menu-item-242" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-242"><a title="Sitemap／サイトマップ" href="http://marycore.jp/sitemap/">サイトマップ</a></li>
<li id="menu-item-3180" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3180"><a target="_blank" href="https://cse.google.com:443/cse/publicurl?cx=009489372983289696163:xjk7xgk_hm4">検索</a></li>
</ul></div></nav></header><div id="main" class="wrapper"><div style="margin-bottom: 18px; margin-bottom: 1.2857142857rem;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle slot_header_00" style="display:block" data-ad-client="ca-pub-5613714714878183" data-ad-slot="5089572954" data-ad-format="horizontal"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div><div id="breadcrumb" class="breadcrumb"><div itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="http://marycore.jp/" itemprop="url"><span itemprop="title">Home</span></a> › </div><div itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="http://marycore.jp/prog/" itemprop="url"><span itemprop="title">プログラミング言語</span></a> › </div><div itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="http://marycore.jp/prog/cpp/" itemprop="url"><span itemprop="title">C++</span></a></div></div>
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
						<article id="post-1674" class="post-1674 post type-post status-publish format-standard hentry category-cpp tag-tag-programming-technique tag-tag-tech-column tag-tag-programming-methodology tag-tag-future tag-tag-programming-specification tag-tag-programming-detail tag-tag-programming-wisdom">
				<header class="entry-header">
									<h1 class="entry-title">【C++】既存のクラスを拡張する方法【拡張メソッド／カテゴリ】</h1>
			
<style>.mc-social-buttons{font-family:Helvetica,Arial,sans-serif}.mc-social-buttons{margin-top:16px;margin-top:1.1428571429rem}.mc-social-buttons ul{margin:0;padding:0}.mc-social-buttons li{display:inline-block;margin:0 6px 16px 0;margin:0 0.4285714286rem 1.1428571429rem 0}.mc-social-buttons a{color:#f9f9ff;text-decoration:none}.mc-social-buttons a:visited{color:#f9f9ff}.mc-social-buttons a:hover{opacity:.7}.mc-social-button{padding:4px 6px;border-radius:3px;font-weight:700;font-size:10.5px;padding:0.2857142857rem 0.4285714286rem;border-radius:0.2142857143rem;font-size:.75rem}.a{background-color:rgba(27,149,224,0.9)}.a:after{content:'ツイート'}.c{background-color:rgba(66,103,178,0.9)}.c:after{content:'シェア'}.d{background-color:rgba(0,164,222,0.9)}.d:after{content:'Ｂ! クマ'}.e{background-color:rgba(219,68,55,0.9)}.e:after{content:'Ｇ＋'}.f{background-color:rgba(0,187,0,0.9)}.f:after{content:'LINE'}.c:before{content:"f";background-color:#f9f9ff;color:rgba(66,103,178,.9);border-radius:1px;padding:0 4px 0 6px;margin-right:3px;padding:0 0.2857142857rem 0 0.4285714286rem;margin-right:0.2142857143rem}.mc-social-buttons li:last-child{margin-right:0}@media print{.mc-social-buttons{display:none}}</style>
<div class="mc-social-buttons"><ul><li><a target="_blank" href="https://twitter.com/share?url=http%3A%2F%2Fmarycore.jp%2Fprog%2Fcpp%2Fclass-extension-methods%2F&tw_p=tweetbutton&text=%E3%80%90C%2B%2B%E3%80%91%E6%97%A2%E5%AD%98%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E6%8B%A1%E5%BC%B5%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%E3%80%90%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%EF%BC%8F%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%80%91" class="mc-social-button a" onclick="return mc_social_buttons_open(this.href,550,258)"></a></li><li><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fmarycore.jp%2Fprog%2Fcpp%2Fclass-extension-methods%2F&t=%E3%80%90C%2B%2B%E3%80%91%E6%97%A2%E5%AD%98%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E6%8B%A1%E5%BC%B5%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%E3%80%90%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%EF%BC%8F%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%80%91" class="mc-social-button c" onclick="return mc_social_buttons_open(this.href,555,365)"></a></li><li><a target="_blank" href="http://b.hatena.ne.jp/add?mode=confirm&url=http%3A%2F%2Fmarycore.jp%2Fprog%2Fcpp%2Fclass-extension-methods%2F" class="mc-social-button d" onclick="return mc_social_buttons_open(this.href,550,330)"></a></li><li><a target="_blank" href="https://plus.google.com/share?url=http%3A%2F%2Fmarycore.jp%2Fprog%2Fcpp%2Fclass-extension-methods%2F" class="mc-social-button e" onclick="return mc_social_buttons_open(this.href,400,440)"></a></li><li><a target="_blank" href="https://lineit.line.me/share/ui?url=http%3A%2F%2Fmarycore.jp%2Fprog%2Fcpp%2Fclass-extension-methods%2F" class="mc-social-button f" onclick="return mc_social_buttons_open(this.href,550,600)"></a></li></ul></div>
					</header><!-- .entry-header -->

				<div class="entry-content">
		    			<p>C#の拡張メソッドやRubyのオープンクラス、Swiftのextension、Objective-Cのカテゴリーの活用例に近い感覚のものを実現させます。</p>
<p>既存のクラスにメソッド（メンバ関数）を追加する方法と関数（フリー関数）で代替する方法、演算子の多重定義を活用する方法の３種類の方法を紹介します。</p>
<ul>
  <li><a href="#%E3%83%95%E3%83%AA%E3%83%BC%E9%96%A2%E6%95%B0">フリー関数</a>（例：<code class="inline-code inline-code-1">print(std::string("s"));</code>）</li>
  <li><a href="#%E6%BC%94%E7%AE%97%E5%AD%90%E9%96%A2%E6%95%B0">演算子関数</a>（例：<code class="inline-code inline-code-1">std::string("s")-print;</code>）</li>
  <li><a href="#%E3%83%A1%E3%83%B3%E3%83%90%E9%96%A2%E6%95%B0">メンバ関数</a>（例：<code class="inline-code inline-code-1">std::string("s").print();</code>）</li>
</ul>
<pre class="alert alert-2">オススメはフリー関数版の利用です。その他のイディオムは扱いが難しく、実用性には難があります。</pre>
<div class="dbl-rc"><div class="content_toc content_toc_01" style="margin-bottom:18px;margin-bottom:1.2857142857rem"><style type="text/css">.slot_content_toc_01{width:300px;height:250px}@media (min-width:375px){.slot_content_toc_01{width:336px;height:280px}}@media (min-width:950px){.slot_content_toc_01{width:300px;height:250px}}@media (min-width:1075px){.slot_content_toc_01{width:336px;height:280px}}</style><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle slot_content_toc_01" style="display:block" data-ad-client="ca-pub-5613714714878183" data-ad-slot="2558316956" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="content_toc content_toc_02" style="margin-bottom:18px;margin-bottom:1.2857142857rem"><style type="text/css">.slot_content_toc_02{width:300px;height:250px}@media (min-width:375px){.slot_content_toc_02{width:336px;height:280px}}@media (min-width:950px){.slot_content_toc_02{width:300px;height:250px}}@media (min-width:1075px){.slot_content_toc_02{width:336px;height:280px}}</style><ins class="adsbygoogle slot_content_toc_02" style="display:block" data-ad-client="ca-pub-5613714714878183" data-ad-slot="3352115982" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div style="clear:both"></div><style>.dbl-rc>div{width:50%;float:left}@media (max-width:950px){.dbl-rc>div:last-child{display:none}.dbl-rc>div{witdh:100%}}</style>
<h1 id="%E3%83%95%E3%83%AA%E3%83%BC%E9%96%A2%E6%95%B0">フリー関数</h1>
<p>もっとも簡単で手軽な方法です。</p>
<p>フリー関数の第一引数にオブジェクトの参照を渡し、その参照値を元に関数内で独自処理を記述していきます。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) {
   <span class="code-attr-label">std</span>::cout &lt;&lt; s &lt;&lt; <span class="code-attr-label">std</span>::endl;
}
<span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::vector&lt;<span class="code-attr-label">std</span>::string&gt;&amp; v) {
   <span class="code-attr-keyword">for</span> (<span class="code-attr-type">auto</span>&amp;&amp; s : v) <span class="code-attr-label">std</span>::cout &lt;&lt; s &lt;&lt; <span class="code-attr-keyword">", "</span>;
   <span class="code-attr-label">std</span>::cout &lt;&lt; <span class="code-attr-label">std</span>::endl;
}
</code></pre>
<p>同一の名前空間で同名の<code class="inline-code inline-code-1">print</code>関数が複数定義されていても問題はありません。C++の厳格な型検査と関数のオーバーロード解決の仕組みよって、型に応じた関数呼び出しが行われます。</p>
<p>以下はC++の文字列クラスを対象に拡張用の関数を複数定義した例です。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-label">namespace</span> string_extensions {
   <span class="code-attr-label">std</span>::string <span class="code-attr-method">substrFrom</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s, <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::size_type i) { <span class="code-attr-keyword">return</span> s.<span class="code-attr-method">substr</span>(i); }
   <span class="code-attr-label">std</span>::string <span class="code-attr-method">substrTo</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s, <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::size_type i) { <span class="code-attr-keyword">return</span> s.<span class="code-attr-method">substr</span>(0, i); }
   <span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) {
      <span class="code-attr-label">std</span>::cout &lt;&lt; s &lt;&lt; <span class="code-attr-label">std</span>::endl;
   }
}
</code></pre>
<p>使用例です。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-label">std</span>::string s = <span class="code-attr-keyword">"1234"</span>;

<span class="code-attr-label">string_extensions</span>::<span class="code-attr-method">print</span>(<span class="code-attr-label">string_extensions</span>::<span class="code-attr-method">substrFrom</span>(s, 2));

<span class="code-attr-keyword">using</span> <span class="code-attr-label">string_extensions</span>::print;
<span class="code-attr-method">print</span>(<span class="code-attr-label">string_extensions</span>::<span class="code-attr-method">substrTo</span>(s, 2));
  
<span class="code-attr-keyword">using</span> <span class="code-attr-label">namespace</span> string_extensions;
<span class="code-attr-method">print</span>(<span class="code-attr-method">substrFrom</span>(s, 2)); <span class="code-attr-comment">// "34"</span>
<span class="code-attr-method">print</span>(<span class="code-attr-method">substrTo</span>(s, 2));   <span class="code-attr-comment">// "12"</span>
</code></pre>
<p>統一関数呼び出し記法が実用化された場合、将来的にメソッド呼び出し形式での利用が可能になる可能性があります。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-method">print</span>(<span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"s"</span>));
<span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"s"</span>).<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// 上記の呼び出し式と同等に解釈される</span>
</code></pre>

<h1 id="%E6%BC%94%E7%AE%97%E5%AD%90%E9%96%A2%E6%95%B0">演算子関数</h1>
<p>既存クラス向けの演算子を多重定義し、オブジェクトに対して関数オブジェクトを適用するテクニックです。演算子によるメソッドチェーンも実現できます。</p>
<p>この発想は入出力ストリームの<code class="inline-code inline-code-1">&lt;&lt;</code>演算子の活用例と似たようなものだと思ってください。当然、演算子の優先順位や重複定義にも注意する必要があります。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">// 演算子オーバーロード</span>
template&lt;<span class="code-attr-keyword">class</span> F&gt; <span class="code-attr-type">auto</span> operator-(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s, F f) { <span class="code-attr-keyword">return</span> <span class="code-attr-method">f</span>(s); }

<span class="code-attr-comment">// 関数オブジェクト</span>
<span class="code-attr-keyword">struct</span> substrFrom {
   <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::size_type i;
   <span class="code-attr-method">substrFrom</span>(<span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::size_type i) : <span class="code-attr-method">i</span>(i) {}
   <span class="code-attr-type">auto</span> <span class="code-attr-method">operator</span>()(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) { <span class="code-attr-keyword">return</span> s.<span class="code-attr-method">substr</span>(i); };
};
<span class="code-attr-keyword">struct</span> substrTo {
   <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::size_type i;
   <span class="code-attr-type">auto</span> <span class="code-attr-method">operator</span>()(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) { <span class="code-attr-keyword">return</span> s.<span class="code-attr-method">substr</span>(0, i); };
};
<span class="code-attr-keyword">struct</span> {
   <span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; <span class="code-attr-method">operator</span>()(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) {
      <span class="code-attr-keyword">return</span> <span class="code-attr-label">std</span>::cout &lt;&lt; s &lt;&lt; <span class="code-attr-label">std</span>::endl, s;
   };
} print;
</code></pre>
<pre><code class="code code-2 lang-default"><span class="code-attr-label">std</span>::string s = <span class="code-attr-keyword">"1234"</span>;
s-print; <span class="code-attr-comment">// 出力: "1234"</span>
<span class="code-attr-comment">// オペレータチェーン</span>
s-<span class="code-attr-method">substrFrom</span>(1)-substrTo{2}-print; <span class="code-attr-comment">// 出力: "23"</span>
<span class="code-attr-comment">// 単体利用も可能</span>
<span class="code-attr-method">print</span>(substrTo{2}(s)); <span class="code-attr-comment">// 出力: "12"</span>
</code></pre>
<h1 id="%E3%83%A1%E3%83%B3%E3%83%90%E9%96%A2%E6%95%B0">メンバ関数</h1>

<p>今回紹介する方法は通常の継承や別名クラスを用いた方法とは違い、<b class="b b-2">クラス名や名前空間の名称を変える必要がない</b>という特徴があります。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">// ① Good!!</span>
<span class="code-attr-label">std</span>::string str = <span class="code-attr-keyword">"abc"</span>;
str.<span class="code-attr-method">print</span>();

<span class="code-attr-comment">// ② No good...</span>
<span class="code-attr-label">my</span>::<span class="code-attr-object">String</span> str = <span class="code-attr-keyword">"abc"</span>;
str.<span class="code-attr-method">print</span>();
<span class="code-attr-object">StringUtils</span>::<span class="code-attr-method">print</span>(str);
</code></pre>
<p>①のように既存の<code class="inline-code inline-code-1">std::string</code>クラスに<code class="inline-code inline-code-1">print</code>関数を直接追加するイメージです。</p>

<h2 id="%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%82%92%E7%B6%99%E6%89%BF%E3%81%99%E3%82%8B">名前空間を継承する</h2>

<p><code class="inline-code inline-code-1">std</code>等の既存の名前空間を継承し、その中で<code class="inline-code inline-code-1">string</code>クラス等の既存クラスを継承することで、事実上のクラス拡張を実現させます。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> extensions {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std; <span class="code-attr-comment">// 名前空間の継承を実現</span>
   <span class="code-attr-comment">// ここで拡張したいクラスを継承していく</span>
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string; <span class="code-attr-comment">// ①</span>
      <span class="code-attr-comment">// ここにメンバ関数を追加していく</span>
   };
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = extensions; <span class="code-attr-comment">// ②</span>
   <span class="code-attr-label">std</span>::string s;  <span class="code-attr-comment">// 実体はextensions::string</span>
   <span class="code-attr-label">std</span>::cout &lt;&lt; s; <span class="code-attr-comment">// std::coutも使える</span>
}
</code></pre>
<p>クラスのクローンを作るようなイメージですね。
</p>
<h3 id="%E2%91%A0%20using%20std%3A%3Astring%3A%3Astring%3B">① using std::string::string;</h3>
<p>stringクラス内の<code class="inline-code inline-code-1">using std::string::string;</code>は基底クラスのコンストラクタを継承するために必要です。これにより派生クラスに対して、基底クラスと同等の振る舞いをさせることができます。
</p>
<h3 id="%E2%91%A1%20namespace%20std%20%3D%20extensions%3B">② namespace std = extensions;</h3>
<p><code class="inline-code inline-code-1">namespace std = extensions;</code>は継承された拡張空間<code class="inline-code inline-code-1">extensions</code>で既存の<code class="inline-code inline-code-1">std</code>を上書きするために利用しています（正確にはエリアスとしてローカル宣言している）。</p>
<p>main関数の外（グローバル空間）では利用できませんが、名前空間内やメンバ関数内では利用可能です。</p>

<h2 id="%E6%B4%BB%E7%94%A8%E4%BE%8B">活用例</h2>
<p>以下は実際にstd::stringクラスにprintメンバ関数を追加するサンプルコードです。</p>
<pre><code class="code code-2 lang-default">#<span class="code-attr-keyword">include</span> &lt;iostream&gt;
#<span class="code-attr-keyword">include</span> &lt;string&gt;

<span class="code-attr-keyword">namespace</span> string_extensions {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string;
      
      <span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>() {
         <span class="code-attr-label">std</span>::cout &lt;&lt; *<span class="code-attr-type">this</span> &lt;&lt; <span class="code-attr-label">std</span>::endl;
      }
   };
}

<span class="code-attr-comment">// clang++ -std=c++11 main.cpp</span>
<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = string_extensions;
   <span class="code-attr-label">std</span>::string s = <span class="code-attr-keyword">"abc"</span>;
   s.<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// "abc"</span>
}
</code></pre>
<div class="block block1">
	



</div>
<h3 id="%E9%96%93%E6%8E%A5%E7%9A%84%E3%81%AA%E5%88%A9%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF">間接的な利用テクニック</h3>
<p>場合によっては、拡張クラスを戻り値にした場合に、暗黙の型変換によって自動的に基底クラスへのアップキャスト行われてしまう場合がありますが、autoで受け取ることでこれを回避できます。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> A {
   <span class="code-attr-keyword">namespace</span> std = string_extensions;
   <span class="code-attr-label">std</span>::string <span class="code-attr-method">get</span>() { <span class="code-attr-keyword">return</span> <span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"a"</span>); }
}

<span class="code-attr-type">auto</span> <span class="code-attr-method">get</span>() { <span class="code-attr-comment">// C++14</span>
   <span class="code-attr-keyword">namespace</span> std = string_extensions;
   <span class="code-attr-keyword">return</span> <span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"b"</span>);
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-type">auto</span> a = A.<span class="code-attr-method">get</span>();
   a.<span class="code-attr-method">print</span>();     <span class="code-attr-comment">// "a"</span>
   
   <span class="code-attr-method">get</span>().<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// "b"</span>
  
   <span class="code-attr-label">std</span>::string a = <span class="code-attr-label">A</span>::<span class="code-attr-method">get</span>();
   a.<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// ERROR: No member named 'print' in 'std::__1::basic_string&lt;char&gt;'</span>
}
</code></pre>
<p>これによって、拡張クラスを適用していない空間でも、拡張機能の間接的な利用が可能になります。</p>
<h3 id="%E3%83%A1%E3%83%B3%E3%83%90%E9%87%8D%E8%A4%87%E3%81%AE%E5%AF%BE%E5%87%A6%E3%81%A8%E3%82%AB%E3%83%86%E3%82%B4%E3%83%A9%E3%82%A4%E3%82%BA">メンバ重複の対処とカテゴライズ</h3>
<p>既存の機能にバリエーションを持たせる技法も合わせて紹介しておきます。同じメンバ名で異なる挙動を持たせる事が可能になります。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> string_abc {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   <span class="code-attr-keyword">struct</span> category_a : <span class="code-attr-label">std</span>::string {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string;
      <span class="code-attr-keyword">const</span> <span class="code-attr-type">char</span>* <span class="code-attr-method">c_str</span>() { <span class="code-attr-keyword">return</span> (<span class="code-attr-keyword">"A: "</span> + *<span class="code-attr-type">this</span>).<span class="code-attr-method">c_str</span>(); }
   };
   <span class="code-attr-keyword">struct</span> category_b : category_a {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">category_a</span>::category_a;
      <span class="code-attr-keyword">const</span> <span class="code-attr-type">char</span>* <span class="code-attr-method">c_str</span>() { <span class="code-attr-keyword">return</span> (<span class="code-attr-keyword">"B: "</span> + *<span class="code-attr-type">this</span>).<span class="code-attr-method">c_str</span>(); }
   };
   <span class="code-attr-keyword">struct</span> string : category_b {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">category_b</span>::category_b;
      <span class="code-attr-keyword">const</span> <span class="code-attr-type">char</span>* <span class="code-attr-method">c_str</span>() { <span class="code-attr-keyword">return</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::<span class="code-attr-method">c_str</span>(); }
   };
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = string_abc;
   <span class="code-attr-label">std</span>::string s = <span class="code-attr-keyword">"abc"</span>;
   <span class="code-attr-label">std</span>::cout &lt;&lt; s.<span class="code-attr-method">c_str</span>();             <span class="code-attr-comment">// "abc"</span>
   <span class="code-attr-label">std</span>::cout &lt;&lt; s.<span class="code-attr-label">category_a</span>::<span class="code-attr-method">c_str</span>(); <span class="code-attr-comment">// "A: abc"</span>
   <span class="code-attr-label">std</span>::cout &lt;&lt; s.<span class="code-attr-label">category_b</span>::<span class="code-attr-method">c_str</span>(); <span class="code-attr-comment">// "B: abc"</span>
}
</code></pre>
<h2 id="ADL%E3%81%AE%E6%B4%BB%E7%94%A8">ADLの活用</h2>



<p>標準ライブラリのクラス向けに、「<a href="http://marycore.jp/prog/cpp/about-adl-avoid-adl/" target="_blank">ADL</a>」を前提とした関数を定義することも可能となります。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-label">namespace</span> adl { <span class="code-attr-keyword">using</span> <span class="code-attr-label">namespace</span> std;
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::<span class="code-attr-object">string</span> { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::<span class="code-attr-object">string</span>; };
   <span class="code-attr-keyword">template</span>&lt;<span class="code-attr-keyword">class</span> T&gt; <span class="code-attr-keyword">void</span> <span class="code-attr-method">f</span>(<span class="code-attr-keyword">const</span> T&amp; t) { <span class="code-attr-keyword">for</span> (<span class="code-attr-type">auto</span>&amp;&amp; v : t) cout &lt;&lt; v &lt;&lt; endl; }
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-label">std</span>::<span class="code-attr-object">string</span> s = <span class="code-attr-string">"ab"</span>;
   <span class="code-attr-method">f</span>(s); <span class="code-attr-comment">// error: use of undeclared identifier 'f'; did you mean 'adl::f'?</span>
   
   <span class="code-attr-label">namespace</span> std = adl;
   <span class="code-attr-label">std</span>::<span class="code-attr-object">string</span> t = <span class="code-attr-string">"ab"</span>;
   <span class="code-attr-method">f</span>(t); <span class="code-attr-comment">// OK</span>
   
   <span class="code-attr-label">std</span>::<span class="code-attr-object">vector</span>&lt;<span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>&gt; v = {t};
   <span class="code-attr-method">f</span>(v); <span class="code-attr-comment">// OK</span>
   
   <span class="code-attr-label">std</span>::<span class="code-attr-object">vector</span>&lt;<span class="code-attr-type">int</span>&gt; w = {};
   <span class="code-attr-method">f</span>(w);      <span class="code-attr-comment">// error: use of undeclared identifier 'f'; did you mean 'adl::f'?</span>
   <span class="code-attr-label">adl</span>::<span class="code-attr-method">f</span>(w); <span class="code-attr-comment">// OK</span>
}</code></pre>
<pre><code class="code code-2 lang-default"><span class="code-attr-label">namespace</span> adl { <span class="code-attr-keyword">using</span> <span class="code-attr-label">namespace</span> std;
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::<span class="code-attr-object">string</span> { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::<span class="code-attr-object">string</span>; };
   <span class="code-attr-type">auto</span> <span class="code-attr-method">begin</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>&amp; v) -&gt; <span class="code-attr-method">decltype</span>(v.<span class="code-attr-method">begin</span>()) { <span class="code-attr-keyword">return</span> <span class="code-attr-method">puts</span>(<span class="code-attr-string">"hello"</span>), v.<span class="code-attr-method">begin</span>(); }
   <span class="code-attr-keyword">template</span>&lt;<span class="code-attr-keyword">class</span> T&gt; <span class="code-attr-type">auto</span> <span class="code-attr-method">end</span>(<span class="code-attr-keyword">const</span> T&amp; v) -&gt; <span class="code-attr-method">decltype</span>(v.<span class="code-attr-method">end</span>()) { <span class="code-attr-keyword">return</span> <span class="code-attr-method">puts</span>(<span class="code-attr-string">"world"</span>), v.<span class="code-attr-method">end</span>(); }
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-label">namespace</span> std = adl;
        <span class="code-attr-method">begin</span>(<span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>{}); <span class="code-attr-comment">//  std::string::iterator{item: '\0'}</span>
   <span class="code-attr-label">std</span>::<span class="code-attr-method">begin</span>(<span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>{}); <span class="code-attr-comment">// "hello"</span>
        <span class="code-attr-method">end</span>(<span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>{});   <span class="code-attr-comment">//  error: call to 'begin' is ambiguous</span>
   <span class="code-attr-label">std</span>::<span class="code-attr-method">end</span>(<span class="code-attr-label">std</span>::<span class="code-attr-object">string</span>{});   <span class="code-attr-comment">// "world"</span>
}</code></pre>
<h2 id="%E8%80%83%E5%AF%9F">考察</h2>
<p>今回紹介したこの技法を用いると、stdに自作クラスを追加することが可能になってしまいます（あくまで仮想的・間接的ではありますが）。例えば<code class="inline-code inline-code-1">std::json</code>や<code class="inline-code inline-code-1">std::string_view</code>という機能を独自に追加できてしまうわけです<!--（やるとは言ってない）-->。</p>
<p>C++の規格上では名前空間stdに特殊化以外の用途で独自の定義を加えることが禁止されているのですが（17.4.3.1）、今回の方法であれば、おそらくその制限には抵触しない形になるのではないかと思われます。</p>
<pre class="alert alert-2">そもそも名前空間のエイリアスにstdを使っていいのかという疑問も残ります。また常識の範囲内で考えても良いイディオムではないかもしれません。</pre>







<h2 id="%E5%82%99%E8%80%83">備考</h2>
<p>ちなみに将来的に<code class="inline-code inline-code-1">a.fn(b)</code>式を<code class="inline-code inline-code-1">fn(a, b)</code>式と解釈させる仕様がC++に取り込まれた場合、今回紹介したテクニックは不要になり、代わりに以下のような書き方で、既存クラスの拡張が実現できるようになります。</p>



<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) { <span class="code-attr-label">std</span>::cout &lt;&lt; s; }

<span class="code-attr-comment">// printメンバ関数が見つからない場合、</span>
<span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"a"</span>).<span class="code-attr-method">print</span>();
<span class="code-attr-comment">// 代わりにこちらの関数呼び出しが行われる</span>
<span class="code-attr-method">print</span>(<span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-keyword">"a"</span>));
</code></pre>

<p>この未来、信じるか信じないかはあなた次第です。</p>

<div class="link-box" style="text-align:left;padding-bottom:20px;font-size:small;/zoom: 1;overflow: hidden;"><div class="link-image" style="float:left;margin:0 15px 10px 0;"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2F1556343841%2Fref%3Dnosim" target="_blank" ><img src="https://images-fe.ssl-images-amazon.com/images/I/51pwrPE3cIL._SL160_.jpg" style="border: none;" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none;"></div><div class="link-info" style="line-height:120%;/zoom: 1;overflow: hidden;"><div class="link-name" style="margin-bottom:10px;line-height:120%"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2F1556343841%2Fref%3Dnosim" target="_blank" >Illuminati: The Game of Conspiracy (Steve Jackson games)</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none;"></div><div class="link-detail" style="margin-bottom:5px;">Steve Jackson Steve Jackson Games 1998-10    </div><div class="link-link1" style="margin-top:10px;"><div class="shoplinkamazon" style="display:inline;margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DIlluminati%253A%2520The%2520Game%2520of%2520Conspiracy%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank" >Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none;"></div><div class="shoplinkrakuten" style="display:inline;margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FIlluminati%253A%2520The%2520Game%2520of%2520Conspiracy%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank" >楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none;"></div><div class="shoplinkseven" style="display:inline;margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3DIlluminati%253A%2520The%2520Game%2520of%2520Conspiracy%26searchKeywordFlg%3D1" target="_blank" ><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none;">7net</a></div></div></div><div class="booklink-footer" style="clear: left"></div></div>

<h2 id="%E5%AE%9F%E7%94%A8%E6%80%A7">実用性</h2>
<p>今回紹介した技法はかなりアクロバティックな技法であり賛否両論があるかと思います。個人的には移植性の問題を気にしなければ問題なく使えるレベルのものだと感じています。</p>
<p>他にも注意しなければならない問題は色々あるのですが、その点については後半でじっくり解説します。
</p>

<h3 id="%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E7%94%A8%E9%80%94%E3%81%A7%E3%81%AE%E4%BD%BF%E7%94%A8%E3%81%8C%E3%82%AA%E3%82%B9%E3%82%B9%E3%83%A1">デバッグ用途での使用がオススメ</h3>
<p>ちなみに、この技法はもともと<code class="inline-code inline-code-1">std::vector::operator[]</code>演算子の境界チェックを実現するためのテクニックでもあったため、デバッグ用途で使うのが本来もっともオススメの活用方法です。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">// 境界チェック付きvector</span>
<span class="code-attr-keyword">namespace</span> std_vector_bounds_checking {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   template&lt;<span class="code-attr-keyword">class</span> T, <span class="code-attr-keyword">class</span> A = <span class="code-attr-label">std</span>::allocator&lt;T&gt;&gt;
   <span class="code-attr-keyword">struct</span> vector : <span class="code-attr-label">std</span>::vector&lt;T, A&gt; {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::vector&lt;T, A&gt;::vector;
      typename <span class="code-attr-label">std</span>::vector&lt;T&gt;::reference
      operator[](typename <span class="code-attr-label">std</span>::vector&lt;T&gt;::size_type n) {
         <span class="code-attr-keyword">return</span> <span class="code-attr-type">this</span>-&gt;<span class="code-attr-method">at</span>(n);
      }
   };
}
</code></pre>
<pre><code class="code code-2 lang-default">#ifdef <span class="code-attr-object"><span class="code-attr-keyword">DEBUG</span></span>
<span class="code-attr-keyword">namespace</span> std = std_vector_bounds_checking;
#endif

<span class="code-attr-comment">// デバッグ環境</span>
<span class="code-attr-label">std</span>::vector&lt;<span class="code-attr-type">int</span>&gt;()[0]; <span class="code-attr-comment">// 例外発生（バグの早期発見に繋げる）</span>

<span class="code-attr-comment">// リリース環境  （ハードリアルタイムシステム）</span>
<span class="code-attr-label">std</span>::vector&lt;<span class="code-attr-type">int</span>&gt;()[0]; <span class="code-attr-comment">// チェック無し（パフォーマンス優先）</span>

<span class="code-attr-comment">// 良くないやり方</span>
<span class="code-attr-comment">// namespace std { class debug_vector : std::vector; }</span>
<span class="code-attr-comment">// #define vector debug_vector; // 更に良くないやり方</span>
<span class="code-attr-comment">// std::vector&lt;int&gt;().at(0);    // 後々面倒なやり方</span>
</code></pre>
<p>こうすることで、境界チェック（範囲チェック）用のクラスを別名で作る必要が無くなります。またリリースビルド前のコード修正や、下手なマクロ置換も不要になります。
</p>


<h2 id="%E5%AE%9F%E7%94%A8%E5%8C%96%E3%81%AF%E9%9B%A3%E3%81%97%E3%81%84">実用化は難しい</h2>
<p>stdを再定義する際に一つの名前空間しか指定できないため、モジュール化や個々の機能のカテゴライズが困難だという実用面の問題が残っています。</p>
<p>また用途によっては、多態性の仕組みや非virtualデストラクタの問題をきちんと理解した上で使わなければなりません。</p>
<h3 id="%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E8%A7%A3%E6%94%BE%E3%81%AB%E6%B3%A8%E6%84%8F">リソースの解放に注意</h3>
<p>今回の技法は結局のところクラスの継承を用いているため、「非仮想デストラクタ」問題の影響を受けます。つまるところ、アップキャスト後のポインタを解放した場合、派生クラス側のデストラクタが呼ばれなくなる問題に遭遇します。</p>
<p>そのため、リソース解放が必要な処理には注意する必要があります。</p>
<h3 id="%E3%83%80%E3%82%A6%E3%83%B3%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88%E3%83%BB%E3%82%A2%E3%83%83%E3%83%97%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C">ダウンキャスト・アップキャストの問題</h3>
<p>C++では基底クラスから派生クラスへの暗黙的なキャストが行われないため、手動でのキャストを行う必要が出てきます。よって、他のAPIとのやり取りがしづらくなるという欠点があります。</p>
<h4 id="%E5%85%AC%E9%96%8B%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AE%E5%95%8F%E9%A1%8C">公開インターフェースの問題</h4>

<p>公開インターフェースに関する問題は以下の方法で対処できます。また拡張機能の利用を隠蔽することも可能になります<span class="s s-2">（つまりmain.cpp側は拡張クラスやキャスト処理を意識する必要がなくなる）</span>。
</p>

<pre><code class="code code-2 lang-default"><span class="code-attr-comment">/* extensions.hpp */</span>
<span class="code-attr-keyword">namespace</span> std_neue {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   <span class="code-attr-keyword">namespace</span> super = std; <span class="code-attr-comment">// 重要ポイント</span>
}
<span class="code-attr-keyword">namespace</span> std_neue {
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string; };
}

<span class="code-attr-comment">/* app.hpp */</span>
<span class="code-attr-keyword">namespace</span> app {
   <span class="code-attr-keyword">void</span> <span class="code-attr-method">exe</span>(<span class="code-attr-label">std</span>::string str);
}
<span class="code-attr-comment">/* app.cpp */</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"extensions.hpp"</span>
<span class="code-attr-keyword">namespace</span> app {
   <span class="code-attr-keyword">namespace</span> std = std_neue;
   <span class="code-attr-keyword">void</span> <span class="code-attr-method">exe</span>(<span class="code-attr-label">std</span>::<span class="code-attr-label">super</span>::string str) { <span class="code-attr-comment">// 重要ポイント</span>
      <span class="code-attr-label">std</span>::string s = str; <span class="code-attr-comment">// 必要に応じてキャスト</span>
  }
}

<span class="code-attr-comment">/* main.cpp */</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"app.hpp"</span>
<span class="code-attr-comment">// #include "extensions.hpp" // 不要</span>
<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-comment">// namespace std = std_neue; // 不要</span>
   <span class="code-attr-label">std</span>::string str = <span class="code-attr-keyword">"str"</span>;
   <span class="code-attr-label">app</span>::<span class="code-attr-method">exe</span>(str); <span class="code-attr-comment">// キャスト不要（app.cpp側で解決）</span>
}
</code></pre>
<h4 id="%E6%B4%BE%E7%94%9F%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%95%8F%E9%A1%8C%E3%81%B8%E3%81%AE%E5%AF%BE%E5%87%A6">派生クラスの問題への対処</h4>


<p>内部的な問題に関しては、コピー・コンストラクタを手動で宣言することで対処が可能ですがオススメはしません。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string;
   <span class="code-attr-method">string</span>() = default;
   <span class="code-attr-method">string</span>(<span class="code-attr-keyword">const</span> <span class="code-attr-label">std</span>::string&amp; s) : <span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(s) {}
   <span class="code-attr-method">string</span>(<span class="code-attr-label">std</span>::string&amp;&amp; s) : <span class="code-attr-label">std</span>::<span class="code-attr-method">string</span>(<span class="code-attr-label">std</span>::<span class="code-attr-method">move</span>(s)) {}
   <span class="code-attr-keyword">void</span> <span class="code-attr-method">test_gsub</span>() {
      <span class="code-attr-label">std</span>::string s = <span class="code-attr-label">std</span>::<span class="code-attr-method">regex_replace</span>(<span class="code-attr-keyword">"a"</span>, <span class="code-attr-label">std</span>::<span class="code-attr-method">regex</span>(<span class="code-attr-keyword">"a"</span>), <span class="code-attr-keyword">"b"</span>);
      string r = s;
   }
};
</code></pre>
<p>しかし、そこまでして本イディオムを使うべきかどうかは疑問があります。本イディオムは、デバッグ用のイディオムとしての利用が適切だと考えており、あくまで「簡易的な機能」として割り切って使われるべきでしょう。既存のAPIをフックして不具合の原因特定を行ったり、デバッガ用に動的な関数（debugDescription等）を追加したりと、開発効率の向上や不具合の原因調査を目的に活用するのがオススメです。</p>

<h3 id="%E3%82%AB%E3%83%86%E3%82%B4%E3%83%A9%E3%82%A4%E3%82%BA%E3%81%8C%E5%9B%B0%E9%9B%A3">カテゴライズが困難</h3>
<p>今回はprint関数用のstring拡張を例に仮想空間<code class="inline-code inline-code-1">string_extensions</code>を作成しましたが、今後「正規表現」用の拡張も追加したいとなった場合は、同じように<code class="inline-code inline-code-1">string_extensions::string</code>へ直接、正規表現関連のメンバ関数を追加する必要が出てきます。</p>
<p>本来であれば、<code class="inline-code inline-code-1">string_printer.hpp</code>や<code class="inline-code inline-code-1">string_regex.hpp</code>というヘッダーファイルを作成し、必要に応じて両者をインポートしたり、組み合わせて利用できるようにしたいのですが、現状の言語仕様ではその手の実現が困難です。</p>
<pre class="alert alert-2">プリプロセッサを用いればできなくもないのですが、それはあくまで最終手段です。</pre>

<p>ちなみに<code class="inline-code inline-code-1">namespace string_printer { using namespace string_regex; }</code>という入れ子状の宣言方法を用いれば、ファイル分割自体は可能になりますが、両者の間に依存関係が形成されてしまいます。結局のところ、モジュール化という本来の目的は果たせません。</p>
<h3 id="%E3%82%AF%E3%83%A9%E3%82%B9%E5%88%A5%E3%81%AE%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96%E3%81%8C%E5%9B%B0%E9%9B%A3">クラス別のモジュール化が困難</h3>

<p>また同様に、stringクラス用の拡張とvectorクラス用の拡張を分離するといったことも困難です。</p>
<pre><code class="code code-2 lang-default">#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"string_extensions.hpp"</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"vector_extensions.hpp"</span>
<span class="code-attr-keyword">namespace</span> modules {
   <span class="code-attr-comment">// このように必要な物のみ取り込めるようにしたい</span>
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> string_extensions;
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> vector_extensions;
}

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = modules;
   <span class="code-attr-comment">// Name hidingの影響を受けてエラーになる</span>
   <span class="code-attr-comment">// A type named 'string' is hidden by a declaration in a different namespace</span>
   <span class="code-attr-label">std</span>::string x;
}
</code></pre>


<p>対応策としては、以下のような複数の方法が考えられます。</p>
<h4 id="%E3%82%B3%E3%83%BC%E3%83%89%E5%8D%98%E4%BD%8D%E3%81%A7%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96">コード単位でモジュール化</h4>
<p>パッケージ管理や保守、単体テストがしづらくなる問題があります。そのため、場合によってはプリプロセッサの利用が必要になるかもしれません。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">/* string_extensions.hpp */</span>
<span class="code-attr-comment">// namespace string_extensions {</span>
<span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string; };
<span class="code-attr-comment">// }</span>

<span class="code-attr-comment">/* vector_extensions.hpp */</span>
<span class="code-attr-comment">// namespace vector_extensions {</span>
template&lt;<span class="code-attr-keyword">class</span> T&gt; <span class="code-attr-keyword">struct</span> vector : <span class="code-attr-label">std</span>::vector&lt;T&gt; { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::vector&lt;T&gt;::vector; };
<span class="code-attr-comment">// }</span>

<span class="code-attr-comment">/* main.cpp */</span>
<span class="code-attr-keyword">namespace</span> marge {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   #<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"string_extensions.hpp"</span>
   #<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"vector_extensions.hpp"</span>
}
<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = marge;
}
</code></pre>
<h4 id="%E5%85%B1%E9%80%9A%E3%81%AE%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%82%92%E6%B1%BA%E3%82%81%E6%89%93%E3%81%A1%E3%81%97%E3%81%A6%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96">共通の名前空間を決め打ちしてモジュール化</h4>
<p>おそらく最も現実的な妥協案です。</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">/* string_extensions.hpp */</span>
<span class="code-attr-keyword">namespace</span> std_neue { <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">std</span>::string { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::<span class="code-attr-label">string</span>::string; };
}
<span class="code-attr-comment">/* vector_extensions.hpp */</span>
<span class="code-attr-keyword">namespace</span> std_neue { <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> std;
   template&lt;<span class="code-attr-keyword">class</span> T&gt;<span class="code-attr-keyword">struct</span> vector : <span class="code-attr-label">std</span>::vector&lt;T&gt; { <span class="code-attr-keyword">using</span> <span class="code-attr-label">std</span>::vector&lt;T&gt;::vector; };
}

<span class="code-attr-comment">/* main.cpp */</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"string_extensions.hpp"</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"vector_extensions.hpp"</span>
<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-keyword">namespace</span> std = std_neue;
}
</code></pre>
<p>現実的とは言っても問題は残ります。</p>
<h5 id="%E6%9F%94%E8%BB%9F%E6%80%A7%E3%81%AB%E4%B9%8F%E3%81%97%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E5%95%8F%E9%A1%8C">柔軟性に乏しいという問題</h5>
<p>固定的な名前を使っているため、自作した拡張名前空間の内の一部の機能だけを、第三者の物とすり替えるようなことができなくなります。他人のライブラリでも同様にstd_neueという名前空間が使われていれば、この限りではありませんが・・・。
</p>

<p>この問題に対処するためには先程の<a href="#%E3%82%B3%E3%83%BC%E3%83%89%E5%8D%98%E4%BD%8D%E3%81%A7%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96"># コード単位でモジュール化</a>する方法を採る必要が出てきます。</p>
<h5 id="%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%81%AE%E4%BE%B5%E9%A3%9F%E5%95%8F%E9%A1%8C">名前空間の侵食問題</h5>
<p>また<code class="inline-code inline-code-1">string</code>拡張と<code class="inline-code inline-code-1">vector</code>拡張で共通の名前空間を使っているため、「片方の拡張を使うと、もう一方の拡張も取り込まれてしまう」という問題もあります。</p>
<pre><code class="code code-2 lang-default">#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"string_extensions.hpp"</span>
#<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"vector_extensions.hpp"</span>
<span class="code-attr-keyword">namespace</span> A {
   <span class="code-attr-keyword">namespace</span> std = std_neue;
   <span class="code-attr-comment">// string拡張のみ使いたいがvector拡張も取り込まれてしまう</span>
}
<span class="code-attr-keyword">namespace</span> B {
   <span class="code-attr-keyword">namespace</span> std = std_neue;
   <span class="code-attr-comment">// vector拡張のみ使いたいがstring拡張も取り込まれてしまう</span>
}
</code></pre>
<p>ヘッダ側がリンケージを持たず、また多重インクルードを容認する前提であれば、以下の方法での対処も可能です。あくまで例外的な活用法であることに注意してください。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> A {
   #<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"string_extensions.hpp"</span>
   <span class="code-attr-keyword">namespace</span> std = std_neue;
   <span class="code-attr-comment">// string拡張のみ取り込まれる</span>
}
<span class="code-attr-keyword">namespace</span> B {
   #<span class="code-attr-keyword">include</span> <span class="code-attr-keyword">"vector_extensions.hpp"</span>
   <span class="code-attr-keyword">namespace</span> std = std_neue;
   <span class="code-attr-comment">// vector拡張のみ取り込まれる</span>
}
</code></pre>
<h3 id="%E7%B5%90%E5%B1%80%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D%E5%AE%9F%E7%94%A8%E7%9A%84%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84">結局のところ実用的ではない</h3>
<p>以上のことから、本イディオムには、保守性とユーザビリティを担保するための最善の策が存在しないという重大な問題があります。C++の今後の進化によっては本イディオムが実用化できる日がくるかもしれません。
</p>

<pre class="alert alert-2">そもそも既存クラスの拡張はきちんと言語機能としてサポートして欲しい気もします。</pre>
<h3 id="Unified%20Call%20Syntax">Unified Call Syntax</h3>
<p>その点を考えると、先程紹介したa.fn(b)式とfn(a, b)式の案がもっとも現実的な気がしますが、本仕様の提案はだいぶ前から行われており、いまだ実現には至っていないようです（N4165, N4474）。</p>
<p>既存のC言語APIも扱いやすくなるので、個人的には面白い仕様だと感じています。オートコンプリートの恩恵も受けられるようになります。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">const</span> <span class="code-attr-type">char</span>* cstr = <span class="code-attr-keyword">"hello"</span>;
cstr-&gt;<span class="code-attr-method">strcmp</span>(<span class="code-attr-keyword">"hello"</span>); <span class="code-attr-comment">// 0</span>
cstr-&gt;<span class="code-attr-method">strlen</span>();        <span class="code-attr-comment">// 5</span>

<span class="code-attr-comment">// ただこのケースにどう対応するのかという問題が残る</span>
<span class="code-attr-comment">// char* strcat(char*, const char*);</span>
cstr-&gt;<span class="code-attr-method">strcat</span>(<span class="code-attr-keyword">"world"</span>); <span class="code-attr-comment">// ???</span>
</code></pre>



<h2 id="namespace%20template">namespace template</h2>
<p>余談ですが、もし仮に名前空間でテンプレート機能が利用できるようになれば、以下のように、利用シーンに応じたモジュール選択が可能になるかもしれません。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">// 出力モジュールと正規表現モジュールを追加</span>
<span class="code-attr-keyword">namespace</span> std = extension_string_print&lt;extension_string_regex&lt;std&gt;&gt;;
</code></pre>
<pre><code class="code code-2 lang-default"><span class="code-attr-comment">// 正規表現のみ追加</span>
<span class="code-attr-keyword">namespace</span> std = extension_string_regex&lt;std&gt;;
</code></pre>
<h3 id="%E6%B4%BB%E7%94%A8%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB">活用サンプル</h3>
<pre><code class="code code-2 lang-default">template&lt;<span class="code-attr-keyword">namespace</span> M&gt; <span class="code-attr-keyword">namespace</span> extension_string_print {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> M;
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">M</span>::string {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">M</span>::<span class="code-attr-label">string</span>::string;
      <span class="code-attr-keyword">void</span> <span class="code-attr-method">print</span>() { <span class="code-attr-label">M</span>::cout &lt;&lt; *<span class="code-attr-type">this</span> &lt;&lt; <span class="code-attr-label">M</span>::endl; }
   };
}

template&lt;<span class="code-attr-keyword">namespace</span> M&gt; <span class="code-attr-keyword">namespace</span> extension_string_regex {
   <span class="code-attr-keyword">using</span> <span class="code-attr-keyword">namespace</span> M;
   <span class="code-attr-keyword">struct</span> string : <span class="code-attr-label">M</span>::string {
      <span class="code-attr-keyword">using</span> <span class="code-attr-label">M</span>::<span class="code-attr-label">string</span>::string;
      <span class="code-attr-method">string</span>(string&amp;&amp; s) : <span class="code-attr-label">M</span>::<span class="code-attr-method">string</span>(<span class="code-attr-label">M</span>::<span class="code-attr-method">move</span>(s)) {}
      string <span class="code-attr-method">gsub</span>(string p, string r) {
         <span class="code-attr-keyword">return</span> (string&amp;&amp;)<span class="code-attr-label">M</span>::<span class="code-attr-method">regex_replace</span>(*<span class="code-attr-type">this</span>, <span class="code-attr-label">M</span>::<span class="code-attr-method">regex</span>(p), r);
      }
   };
}

<span class="code-attr-keyword">namespace</span> std = extension_string_print&lt;extension_string_regex&lt;std&gt;&gt;;

<span class="code-attr-type">int</span> <span class="code-attr-method">main</span>() {
   <span class="code-attr-label">std</span>::string s = <span class="code-attr-keyword">"abc"</span>;
   s.<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// "abc"</span>
   <span class="code-attr-label">std</span>::cout &lt;&lt; s.<span class="code-attr-method">gsub</span>(<span class="code-attr-keyword">"b"</span>, <span class="code-attr-keyword">"*"</span>); <span class="code-attr-comment">// "a*c"</span>
   
   <span class="code-attr-method">string</span>(<span class="code-attr-keyword">"abc"</span>).<span class="code-attr-method">gsub</span>(<span class="code-attr-keyword">"\\w"</span>, <span class="code-attr-keyword">"$0,"</span>).<span class="code-attr-method">print</span>(); <span class="code-attr-comment">// "a,b,c,"</span>
}
</code></pre>
<p>このように必要な拡張をチェーン状に繋げていくイメージですね。
モジュールの取り回しや管理はしやすくなりそうです。
</p>

<h3 id="%E5%AE%9F%E9%A8%93">実験</h3>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> std = 
   extension_string_regex&lt;
   extension_string_base64&lt;
   extension_vector_json&lt;
   extension_map_json&lt;
   extension_map_xml&lt;
std&gt;&gt;&gt;&gt;;
</code></pre>
<p>えげつないですね。
</p>
<pre><code class="code code-2 lang-default"><span class="code-attr-keyword">namespace</span> std
   = extension_string_regex
   &lt; extension_string_base64
   &lt; extension_vector_json
   &lt; extension_map_xml
   &lt; std
&gt;&gt;&gt;&gt;;
</code></pre>
<pre><code class="code code-2 lang-default">template&lt;<span class="code-attr-keyword">namespace</span> M&gt; <span class="code-attr-keyword">namespace</span> extensions_string =
   extension_string_print &lt; extension_string_regex &lt;
   extension_string_view  &lt; extension_string_ref   &lt;
M&gt;&gt;&gt;&gt;;

template&lt;<span class="code-attr-keyword">namespace</span> M&gt; <span class="code-attr-keyword">namespace</span> extensions_vector = 
   extension_vector_print &lt; extension_vector_json &lt;M&gt;&gt;;

<span class="code-attr-keyword">namespace</span> std = extensions_string&lt;extensions_vector&lt;std&gt;&gt;;
</code></pre>
<p>いずれにしろ、namespace templateが実現されれば、先程挙げた様々な問題が一気に解消されます。</p>					</div><!-- .entry-content -->
				
		<div><div style="font-size:90%;margin-bottom:5px;line-height:1.714285714">広告</div><style type="text/css">.slot_footer{width:300px;height:250px}@media (min-width:375px){.slot_footer{width:336px;height:280px}}@media (min-width:950px){.slot_footer{width:300px;height:250px}}@media (min-width:1075px){.slot_footer{width:336px;height:280px}}</style><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle slot_footer" style="display:block" data-ad-client="ca-pub-5613714714878183" data-ad-slot="6809444154" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div>				
		<footer class="entry-meta" style="float: right;">
			カテゴリー: <a href="http://marycore.jp/prog/cpp/" rel="category tag">C++</a> | タグ: <a href="http://marycore.jp/tag/tag-programming-technique/" rel="tag">テクニック</a>, <a href="http://marycore.jp/tag/tag-tech-column/" rel="tag">技術コラム</a>, <a href="http://marycore.jp/tag/tag-programming-methodology/" rel="tag">方法論</a>, <a href="http://marycore.jp/tag/tag-future/" rel="tag">未来考察</a>, <a href="http://marycore.jp/tag/tag-programming-specification/" rel="tag">言語仕様</a>, <a href="http://marycore.jp/tag/tag-programming-detail/" rel="tag">詳細解説</a>, <a href="http://marycore.jp/tag/tag-programming-wisdom/" rel="tag">豆知識</a> | 投稿日: <a href="http://marycore.jp/prog/cpp/class-extension-methods/" title="13:28" rel="bookmark"><time class="entry-date" datetime="2016-10-15T13:28:23+00:00">2016.10.15</time></a><span class="updated"> | 更新日: <a href="http://marycore.jp/prog/cpp/class-extension-methods/" title="10:24" rel="bookmark"><time class="updated" datetime="2017-11-24T10:24:28+00:00">2017.11.24</time></a></span> | <span class="by-author">投稿者: <span class="author vcard" itemprop="author"><a class="url fn n" href="http://marycore.jp/author/marycore/" title="MaryCore の投稿をすべて表示" rel="author">MaryCore</a></span></span>								</footer><!-- .entry-meta -->
		<div style="clear: both;"></div>
	</article><!-- #post -->
	
				<nav class="nav-single">
					<h3 class="assistive-text">投稿ナビゲーション</h3>
					<span class="nav-previous"><a href="http://marycore.jp/prog/cpp/padding-left-right-zero/" rel="prev"><span class="meta-nav">&larr;</span> 【C++】左詰め／右詰め／ゼロ埋めの方法と注意点【cout／iostream 文字揃え】</a></span>
					<span class="nav-next"><a href="http://marycore.jp/prog/cpp/wrapped-enum/" rel="next">【C++】enum構造体イディオム【enumをstructでラップして便利に使う】 <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single -->

				<div class="matched_content" style="margin: 16px 0; margin: 1.2857142857rem 0;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5613714714878183" data-ad-slot="5313922550"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div>
				
<div id="comments" class="comments-area">

	
	
	
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
						<aside id="categoryrecents-2" class="widget mc_widget_category_recent_entries"><h3 class="widget-title">C++</h3><ul><li><a href="http://marycore.jp/prog/cpp/convert-number-to-binary-octal-decimal-hex-string/">数値を 2進数 8進数 10進数 16進数 文字列に変換する方法</a></li><li><a href="http://marycore.jp/prog/cpp/initialize-data-member/">メンバ変数の初期化｜コンストラクタでの初期化とメンバ宣言時の初期化</a></li><li><a href="http://marycore.jp/prog/cpp/member-initializer-list/">メンバ初期化子リスト｜コンストラクタ初期化子／メンバ初期化子</a></li><li><a href="http://marycore.jp/prog/cpp/call-base-class-constructor/">基底クラスのコンストラクタ呼び出し【子から親クラスの初期化】</a></li><li><a href="http://marycore.jp/prog/cpp/using-directive/">usingディレクティブ【using namespace記法｜using宣言との違い】</a></li><li><a href="http://marycore.jp/prog/cpp/concat-append-string/">文字列の連結と追加【std::string｜文字列結合と挿入処理】</a></li><li><a href="http://marycore.jp/prog/cpp/template-class-typename/">テンプレート宣言時のclassとtypenameの違いと使い分け</a></li><li><a href="http://marycore.jp/prog/cpp/std-string-split/">std::string 文字列の分割（split）｜区切り文字／文字列に対応</a></li><li><a href="http://marycore.jp/prog/cpp/std-string-equal-compare/">文字列の比較を行う方法【equal, compare, ==比較演算子｜std::string】</a></li><li><a href="http://marycore.jp/prog/cpp/std-string-find-search/">文字列の検索を行う方法【std::string｜find／find_first_of／search】</a></li></ul><p class="mc_widget_category_recent_entries_more"><a href="http://marycore.jp/prog/cpp/page/2/" target="_blank">もっと見る...</a></p></aside><aside id="text-3" class="widget widget_text"><h3 class="widget-title">スポンサーリンク</h3>			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<style type="text/css">
@media (min-width:600px) { .adslot_side { width: 160px; }
@media (min-width:1000px) { .adslot_side { width: 300px; } }</style>
<ins class="adsbygoogle adslot_side" style="display:block" data-ad-client="ca-pub-5613714714878183" data-ad-slot="8227805750" data-ad-format="auto"></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div>
		</aside>		<aside id="mc-recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">最近の投稿</h3>		<ul>
											<li>
					<a href="http://marycore.jp/net/twitter-tips-special/">ツイッター表現辞典｜番外編【なう、にゃーん、尊い、その他の表現】</a>
									</li>
											<li>
					<a href="http://marycore.jp/anime/wizardbarristers/">ウィザード・バリスターズ～弁魔士セシル【アニメ紹介・レビュー・感想】</a>
									</li>
											<li>
					<a href="http://marycore.jp/society/bruised-princess/">プリンセス駅伝の感動ドラマに得体の知れない恐怖を感じた</a>
									</li>
											<li>
					<a href="http://marycore.jp/irony/choco-freak/">森永チョコフレークと日清シスコを食べ比べたオタクの感想</a>
									</li>
											<li>
					<a href="http://marycore.jp/prog/c-lang/convert-number-to-binary-octal-decimal-hex-c-string/">【C言語】数値を 2進数 8進数 10進数 16進数 文字列に変換する方法</a>
									</li>
											<li>
					<a href="http://marycore.jp/prog/cpp/convert-number-to-binary-octal-decimal-hex-string/">C++ 数値を 2進数 8進数 10進数 16進数 文字列に変換する方法</a>
									</li>
											<li>
					<a href="http://marycore.jp/irony/mawaru-takaya/">ラーメン店「回高屋」の読み方は？ 店舗数は？ チェーン店って本当？</a>
									</li>
											<li>
					<a href="http://marycore.jp/think/human-rights-first/">レディーファーストは女性差別なのか｜盲目的善意と慈悲的差別</a>
									</li>
											<li>
					<a href="http://marycore.jp/prog/php/call-to-undefined-function/">【PHP】Fatal error: Call to undefined function f() の原因と対処</a>
									</li>
											<li>
					<a href="http://marycore.jp/society/tokyo-volunteer-revolution/">五輪ボランティア批判と格差社会への不満｜オリンピックやりがい搾取</a>
									</li>
					</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">カテゴリー</h3>		<ul>
	<li class="cat-item cat-item-31"><a href="http://marycore.jp/prog/cpp/" >C++</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://marycore.jp/prog/cocoa/" >Cocoa</a>
</li>
	<li class="cat-item cat-item-30"><a href="http://marycore.jp/prog/c-lang/" >C言語</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://marycore.jp/affiliate/adsense/" >Googleアドセンス</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://marycore.jp/prog/css/" >HTML/CSS</a>
</li>
	<li class="cat-item cat-item-57"><a href="http://marycore.jp/prog/js/" >JavaScript</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://marycore.jp/prog/mamp/" >MAMP</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://marycore.jp/news/" >News</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://marycore.jp/prog/objective-c/" >Objective-C</a>
</li>
	<li class="cat-item cat-item-62"><a href="http://marycore.jp/prog/php/" >PHP</a>
</li>
	<li class="cat-item cat-item-53"><a href="http://marycore.jp/prog/ruby/" >Ruby</a>
</li>
	<li class="cat-item cat-item-23"><a href="http://marycore.jp/prog/swift/" >Swift</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://marycore.jp/wordpress/" >WordPress</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://marycore.jp/prog/xcode/" >Xcode &amp; Clang</a>
</li>
	<li class="cat-item cat-item-55"><a href="http://marycore.jp/code/" >コード</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://marycore.jp/design/" >デザイン</a>
</li>
	<li class="cat-item cat-item-56"><a href="http://marycore.jp/net/" >ネット文化</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://marycore.jp/mac/" >パソコン・Mac</a>
</li>
	<li class="cat-item cat-item-41"><a href="http://marycore.jp/programmer/" >プログラマ</a>
</li>
	<li class="cat-item cat-item-25"><a href="http://marycore.jp/coding/" >プログラミング／コーディング</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://marycore.jp/smart/" >ライフハック</a>
</li>
	<li class="cat-item cat-item-50"><a href="http://marycore.jp/ascii-art/" >今週のAA</a>
</li>
	<li class="cat-item cat-item-17"><a href="http://marycore.jp/yurume/" >今週の一言</a>
</li>
	<li class="cat-item cat-item-64"><a href="http://marycore.jp/works/" >創作</a>
</li>
	<li class="cat-item cat-item-28"><a href="http://marycore.jp/irony/" >戯言</a>
</li>
	<li class="cat-item cat-item-49"><a href="http://marycore.jp/essay/" >日記・雑文</a>
</li>
	<li class="cat-item cat-item-45"><a href="http://marycore.jp/anime/" >漫画・アニメ</a>
</li>
	<li class="cat-item cat-item-27"><a href="http://marycore.jp/society/" >社会</a>
</li>
	<li class="cat-item cat-item-58"><a href="http://marycore.jp/think/" >考察</a>
</li>
	<li class="cat-item cat-item-21"><a href="http://marycore.jp/language/" >言語</a>
</li>
	<li class="cat-item cat-item-59"><a href="http://marycore.jp/music/" >音楽</a>
</li>
		</ul>
</aside><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h3 class="widget-title">タグ</h3><div class="tagcloud"><a href="http://marycore.jp/tag/tag-it-culture/" class="tag-cloud-link tag-link-63 tag-link-position-1" style="font-size: 12.745762711864pt;" aria-label="IT教養 (29個の項目)">IT教養</a>
<a href="http://marycore.jp/tag/tag-programming-technique/" class="tag-cloud-link tag-link-36 tag-link-position-2" style="font-size: 17.847457627119pt;" aria-label="テクニック (80個の項目)">テクニック</a>
<a href="http://marycore.jp/tag/tag-programming-neta/" class="tag-cloud-link tag-link-29 tag-link-position-3" style="font-size: 16.661016949153pt;" aria-label="ネタ (63個の項目)">ネタ</a>
<a href="http://marycore.jp/tag/tag-marketing/" class="tag-cloud-link tag-link-51 tag-link-position-4" style="font-size: 8pt;" aria-label="マーケティング (11個の項目)">マーケティング</a>
<a href="http://marycore.jp/tag/tag-review/" class="tag-cloud-link tag-link-61 tag-link-position-5" style="font-size: 13.457627118644pt;" aria-label="レビュー (34個の項目)">レビュー</a>
<a href="http://marycore.jp/tag/tag-programming-deal/" class="tag-cloud-link tag-link-43 tag-link-position-6" style="font-size: 18.322033898305pt;" aria-label="問題対処 (89個の項目)">問題対処</a>
<a href="http://marycore.jp/tag/tag-programming-basic/" class="tag-cloud-link tag-link-38 tag-link-position-7" style="font-size: 20.576271186441pt;" aria-label="基礎知識 (137個の項目)">基礎知識</a>
<a href="http://marycore.jp/tag/tag-tech-essay/" class="tag-cloud-link tag-link-52 tag-link-position-8" style="font-size: 16.067796610169pt;" aria-label="技術エッセイ (56個の項目)">技術エッセイ</a>
<a href="http://marycore.jp/tag/tag-tech-column/" class="tag-cloud-link tag-link-34 tag-link-position-9" style="font-size: 16.779661016949pt;" aria-label="技術コラム (65個の項目)">技術コラム</a>
<a href="http://marycore.jp/tag/tag-society/" class="tag-cloud-link tag-link-48 tag-link-position-10" style="font-size: 14.28813559322pt;" aria-label="文化社会 (40個の項目)">文化社会</a>
<a href="http://marycore.jp/tag/tag-programming-methodology/" class="tag-cloud-link tag-link-39 tag-link-position-11" style="font-size: 17.491525423729pt;" aria-label="方法論 (75個の項目)">方法論</a>
<a href="http://marycore.jp/tag/tag-daily/" class="tag-cloud-link tag-link-47 tag-link-position-12" style="font-size: 13.813559322034pt;" aria-label="日常 (36個の項目)">日常</a>
<a href="http://marycore.jp/tag/tag-future/" class="tag-cloud-link tag-link-32 tag-link-position-13" style="font-size: 13.338983050847pt;" aria-label="未来考察 (33個の項目)">未来考察</a>
<a href="http://marycore.jp/tag/tag-programming-specification/" class="tag-cloud-link tag-link-42 tag-link-position-14" style="font-size: 19.627118644068pt;" aria-label="言語仕様 (115個の項目)">言語仕様</a>
<a href="http://marycore.jp/tag/tag-programming-detail/" class="tag-cloud-link tag-link-37 tag-link-position-15" style="font-size: 22pt;" aria-label="詳細解説 (182個の項目)">詳細解説</a>
<a href="http://marycore.jp/tag/tag-programming-wisdom/" class="tag-cloud-link tag-link-40 tag-link-position-16" style="font-size: 21.050847457627pt;" aria-label="豆知識 (151個の項目)">豆知識</a></div>
</aside><aside id="text-4" class="widget widget_text"><h3 class="widget-title">自作アプリ</h3>			<div class="textwidget"><h4 class="widget-sub-title">キーボード拡張アプリ</h4>
<div style="margin-left: 12px; margin-left: 0.8571428571rem;"><a href="http://marycore.jp/mctap/" target="_blank">McTap</a></div>
<h4 class="widget-sub-title">テキストエディタ</h4>
<div style="margin-left: 12px; margin-left: 0.8571428571rem; margin-bottom: 6px; margin-bottom: 0.4285714286rem;"><a href="http://marycore.jp/apps/" target="_blank">McEditor</a></div></div>
		</aside><aside id="text-7" class="widget widget_text"><h3 class="widget-title">寄付・支援</h3>			<div class="textwidget"><div style="margin:0 0 8px 0"><span>Amazon: </span><a class="inline-code-1" style="padding:4px 8px" href="http://goo.gl/R1E6WB" target="_blank">ほしい物リスト</a> <a class="inline-code-1" style="padding:4px 8px" href="http://goo.gl/8NYx4T" target="_blank">干し芋のリスト</a></div>
<div style="margin:0 0 12px 0"><span>Bitcoin: <code class="inline-code inline-code-2 our-bitcoin-address" style="padding:4px 8px">32dzgrtFGQ1jDphJcu9iFozujbQ2JKYDXs</code></span></div>
<div style="margin:0 0 8px 0"><a href="https://bitflyer.jp/?bf=q1by3zso" target="_blank"><img style="border-radius: unset; padding: 18px; background-color: #fff;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHUAAAB1AQAAAABYf5MRAAAAtElEQVR4AZzHoWEEQRTFMMNj7r/LB5c5JA38EROAUivgd75lGmQ9HJ2MKb7dhfR+pz2+VGha9wP+A+6vQh1W3/kmABvQ7/x0UqOx+yFwlOj9Rkk02P2Jk4i273zaGujQ3/3OaoZ7+CQIGtt3vuEGttX9ky0zhd/5pDKIenu2TVjf+aVsDfDpBdNMfucDMtfU3W85ghn77kdxOMC3N8JNf283asbDy1Aidj+guRL4zu9vKOAHABV0xOWkC7DVAAAAAElFTkSuQmCC"></a></div>
</div>
		</aside><aside id="mc_widget_214850853-2" class="widget widget_mc_widget_214850853"><h3 class="widget-title">よい物リスト</h3><div style="text-align:left;padding-bottom:20px;font-size:small"><div style="float:left;margin:0 15px 10px 0"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01C0Q2WZC%2Fref%3Dnosim" target="_blank"><img src="https://images-fe.ssl-images-amazon.com/images/I/51qiQZJeSmL._SL160_.jpg" style="border:none" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="line-height:120%"><div style="margin-bottom:10px;line-height:120%;overflow:hidden"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01C0Q2WZC%2Fref%3Dnosim" target="_blank">Ted2 ぬいぐるみXL プレミアム Part3</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="margin-top:10px;overflow:hidden"><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DTed2%2520%25E3%2581%25AC%25E3%2581%2584%25E3%2581%2590%25E3%2582%258B%25E3%2581%25BF%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank">Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FTed2%2520%25E3%2581%25AC%25E3%2581%2584%25E3%2581%2590%25E3%2582%258B%25E3%2581%25BF%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank">楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//ck.jp.ap.valuecommerce.com/servlet/referral?sid=3058386&pid=881893837&vc_url=http%3A%2F%2Fsearch.shopping.yahoo.co.jp%2Fsearch%3Fp%3DTed2%2520%25E3%2581%25AC%25E3%2581%2584%25E3%2581%2590%25E3%2582%258B%25E3%2581%25BF" target="_blank">Yahooショッピング<img src="//ad.jp.ap.valuecommerce.com/servlet/gifbanner?sid=3058386&pid=881893837" height="1" width="1" border="0"></a></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3DTed2%2520%25E3%2581%25AC%25E3%2581%2584%25E3%2581%2590%25E3%2582%258B%25E3%2581%25BF%26searchKeywordFlg%3D1" target="_blank"><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none">7net</a></span><div style="margin-top:15px">早くこれになりたい</div></div></div><div style="clear:both"></div></div><div style="text-align:left;padding-bottom:20px;font-size:small"><div style="float:left;margin:0 15px 10px 0"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01F8M9CCQ%2Fref%3Dnosim" target="_blank"><img src="https://images-fe.ssl-images-amazon.com/images/I/416xVIJvJLL._SL160_.jpg" style="border:none" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="line-height:120%"><div style="margin-bottom:10px;line-height:120%;overflow:hidden"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01F8M9CCQ%2Fref%3Dnosim" target="_blank">東プレ キーボード REALFORCE91UG-S 日本語カナなし 91keyテンキーレスUSB 静電容量無接点 昇華印刷 静音モデル ALL30g荷重 ブラック/グレー NG31BS</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="margin-top:10px;overflow:hidden"><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DREALFORCE%2520ALL30g%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank">Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FREALFORCE%2520ALL30g%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank">楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//ck.jp.ap.valuecommerce.com/servlet/referral?sid=3058386&pid=881893837&vc_url=http%3A%2F%2Fsearch.shopping.yahoo.co.jp%2Fsearch%3Fp%3DREALFORCE%2520ALL30g" target="_blank">Yahooショッピング<img src="//ad.jp.ap.valuecommerce.com/servlet/gifbanner?sid=3058386&pid=881893837" height="1" width="1" border="0"></a></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3DREALFORCE%2520ALL30g%26searchKeywordFlg%3D1" target="_blank"><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none">7net</a></span><div style="margin-top:15px">ガチ勢が使うキーボード</div></div></div><div style="clear:both"></div></div><div style="text-align:left;padding-bottom:20px;font-size:small"><div style="float:left;margin:0 15px 10px 0"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01MTEAV6O%2Fref%3Dnosim" target="_blank"><img src="https://images-fe.ssl-images-amazon.com/images/I/51gOrE1xIkL._SL160_.jpg" style="border:none" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="line-height:120%"><div style="margin-bottom:10px;line-height:120%;overflow:hidden"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01MTEAV6O%2Fref%3Dnosim" target="_blank">【Amazon.co.jp限定】はごろも ポポロスパ7分 5kg 1.6mm</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="margin-top:10px;overflow:hidden"><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3D%25E3%2583%259D%25E3%2583%259D%25E3%2583%25AD%25E3%2582%25B9%25E3%2583%2591%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank">Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%259D%25E3%2583%259D%25E3%2583%25AD%25E3%2582%25B9%25E3%2583%2591%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank">楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//ck.jp.ap.valuecommerce.com/servlet/referral?sid=3058386&pid=881893837&vc_url=http%3A%2F%2Fsearch.shopping.yahoo.co.jp%2Fsearch%3Fp%3D%25E3%2583%259D%25E3%2583%259D%25E3%2583%25AD%25E3%2582%25B9%25E3%2583%2591" target="_blank">Yahooショッピング<img src="//ad.jp.ap.valuecommerce.com/servlet/gifbanner?sid=3058386&pid=881893837" height="1" width="1" border="0"></a></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3D%25E3%2583%259D%25E3%2583%259D%25E3%2583%25AD%25E3%2582%25B9%25E3%2583%2591%26searchKeywordFlg%3D1" target="_blank"><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none">7net</a></span><div style="margin-top:15px">筋トレ用</div></div></div><div style="clear:both"></div></div><div style="text-align:left;padding-bottom:20px;font-size:small"><div style="float:left;margin:0 15px 10px 0"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB00DCKF4OC%2Fref%3Dnosim" target="_blank"><img src="https://images-fe.ssl-images-amazon.com/images/I/61fkY7esaZL._SL160_.jpg" style="border:none" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="line-height:120%"><div style="margin-bottom:10px;line-height:120%;overflow:hidden"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB00DCKF4OC%2Fref%3Dnosim" target="_blank">キユーピー あえるパスタソース6種 [カルボナーラ1袋(2食入)、たらこ1袋(2食入)、ミートソース フォン・ド・ヴォー1袋(2食入)、バジル1袋(2食入)、ツナマヨ1袋(2食入)、きのこの醤油バター1袋(2食入り)]</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="margin-top:10px;overflow:hidden"><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3D%25E3%2583%2591%25E3%2582%25B9%25E3%2582%25BF%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank">Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2583%2591%25E3%2582%25B9%25E3%2582%25BF%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank">楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//ck.jp.ap.valuecommerce.com/servlet/referral?sid=3058386&pid=881893837&vc_url=http%3A%2F%2Fsearch.shopping.yahoo.co.jp%2Fsearch%3Fp%3D%25E3%2583%2591%25E3%2582%25B9%25E3%2582%25BF%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9" target="_blank">Yahooショッピング<img src="//ad.jp.ap.valuecommerce.com/servlet/gifbanner?sid=3058386&pid=881893837" height="1" width="1" border="0"></a></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3D%25E3%2583%2591%25E3%2582%25B9%25E3%2582%25BF%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9%26searchKeywordFlg%3D1" target="_blank"><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none">7net</a></span><div style="margin-top:15px">独身プログラマの強い味方</div></div></div><div style="clear:both"></div></div><div style="text-align:left;padding-bottom:20px;font-size:small"><div style="float:left;margin:0 15px 10px 0"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB074C9NPDL%2Fref%3Dnosim" target="_blank"><img src="https://images-fe.ssl-images-amazon.com/images/I/31ojuKtDw0L._SL160_.jpg" style="border:none" /></a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="line-height:120%"><div style="margin-bottom:10px;line-height:120%;overflow:hidden"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB074C9NPDL%2Fref%3Dnosim" target="_blank">アルタ 抱き枕 もっちり 床ごこち 添い寝  クマ ごろう AR0628121</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></div><div style="margin-top:10px;overflow:hidden"><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371288&p_id=170&pc_id=185&pl_id=4062&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3D%25E3%2582%25AF%25E3%2583%259E%2520%25E6%258A%25B1%25E3%2581%258D%25E6%259E%2595%26__mk_ja_JP%3D%25E3%2582%25AB%25E3%2582%25BF%25E3%2582%25AB%25E3%2583%258A" target="_blank">Amazon</a><img src="//i.moshimo.com/af/i/impression?a_id=371288&p_id=170&pc_id=185&pl_id=4062" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=371293&p_id=54&pc_id=54&pl_id=616&s_v=b5Rz2P0601xu&url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2582%25AF%25E3%2583%259E%2520%25E6%258A%25B1%25E3%2581%258D%25E6%259E%2595%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank">楽天市場</a><img src="//i.moshimo.com/af/i/impression?a_id=371293&p_id=54&pc_id=54&pl_id=616" width="1" height="1" style="border:none"></span><span style="margin-right:5px"><a href="//ck.jp.ap.valuecommerce.com/servlet/referral?sid=3058386&pid=881893837&vc_url=http%3A%2F%2Fsearch.shopping.yahoo.co.jp%2Fsearch%3Fp%3D%25E3%2582%25AF%25E3%2583%259E%2520%25E6%258A%25B1%25E3%2581%258D%25E6%259E%2595" target="_blank">Yahooショッピング<img src="//ad.jp.ap.valuecommerce.com/servlet/gifbanner?sid=3058386&pid=881893837" height="1" width="1" border="0"></a></span><span style="margin-right:5px"><a href="//af.moshimo.com/af/c/click?a_id=623330&p_id=932&pc_id=1188&pl_id=12456&s_v=b5Rz2P0601xu&url=http%3A%2F%2F7net.omni7.jp%2Fsearch%2F%3Fkeyword%3D%25E3%2582%25AF%25E3%2583%259E%2520%25E6%258A%25B1%25E3%2581%258D%25E6%259E%2595%26searchKeywordFlg%3D1" target="_blank"><img src="//i.moshimo.com/af/i/impression?a_id=623330&p_id=932&pc_id=1188&pl_id=12456" width="1" height="1" style="border:none">7net</a></span><div style="margin-top:15px">休日の旦那</div></div></div><div style="clear:both"></div></div></aside>					</div><!-- #secondary -->
	</div><footer id="colophon" role="contentinfo"><div class="site-info">Copyright (C) 2012-2018 <a href="http://marycore.jp/" title="Think Difficult. (；･`д･´)">MaryCore</a>. All rights reserved.</div></footer></div>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-37354401-1','auto');ga('send','pageview');</script><script>
(function(){var c=document.getElementById("site-navigation");if(c){var a=c.getElementsByTagName("button")[0];if(a){var b=c.getElementsByTagName("ul")[0];if(!b||!b.childNodes.length)return a.style.display="none";a.onclick=function(){-1===b.className.indexOf("nav-menu")&&(b.className="nav-menu");-1!==a.className.indexOf("toggled-on")?(a.className=a.className.replace(" toggled-on",""),b.className=b.className.replace(" toggled-on","")):(a.className+=" toggled-on",b.className+=" toggled-on")}}}})();</script>
<script>function mc_social_buttons_open(a,w,h){open(a,'_blank','width='+w+',height='+h+',left='+(screen.availWidth-w)/2+',top='+(screen.availHeight-h)/2);return!1}</script>
</body></html>